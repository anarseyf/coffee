{"version":3,"sources":["dispatch/group.module.scss","dispatch/UserProvider.jsx","dispatch/Dispatch.jsx","dispatch/Dot.jsx","api.jsx","dispatch/TweetsProvider.jsx","dispatch/mapOptions.js","dispatch/geojson.js","dispatch/Map.jsx","dispatch/AreaShape.jsx","clientUtils.js","dispatch/SvgDot.jsx","dispatch/Spark.jsx","dispatch/MultiLine.jsx","dispatch/GroupByArea.jsx","dispatch/Paragraph.jsx","dispatch/Header.jsx","dispatch/Topline.jsx","dispatch/Rehoboam.jsx","dispatch/TypeLegend.jsx","groupingOptions.js","dispatch/useLegend.jsx","dispatch/Legend.jsx","dispatch/Histogram.jsx","dispatch/Section.jsx","dispatch/Annotations.jsx","dispatch/History.jsx","dispatch/TweetDetails.jsx","dispatch/Tweet.jsx","dispatch/TweetList.jsx","dispatch/TweetsActive.jsx","dispatch/TweetsMajor.jsx","dispatch/DispatchAll.jsx","dispatch/TweetsForArea.jsx","dispatch/DispatchArea.jsx","App.jsx","serviceWorker.js","index.tsx","dispatch/legend.module.scss","dispatch/chart.module.scss","dispatch/section.module.scss","dispatch/rehoboam.module.scss","dispatch/history.module.scss","dispatch/tweet.module.scss","dispatch/spark.module.scss","dispatch/paragraph.module.scss","dispatch/topline.module.scss","dispatch/tweetdetails.module.scss","dispatch/svg.module.scss","dispatch/dispatch.module.scss","dispatch/map.module.scss","dispatch/area.module.scss","dispatch/total.module.scss","dispatch/annotations.module.scss","dispatch/tweets.module.scss","app.module.scss"],"names":["module","exports","UserContext","createContext","UserContextKeys","useUser","useState","user","setUser","setSelection","key","value","console","log","UserProvider","children","Provider","Dispatch","area","type","interval","className","styles","container","Appearance","Dot","coordinates","severity","active","color","opacity","baseRadius","Circle","center","radius","fill","fillOpacity","stroke","weight","getStatus","a","getByAPI","getAnnotations","getHistory","getTweetsForArea","queryParams","activeOrMajor","minimize","getTweetsByArea","getTweetsByType","getTweetsMajor24","getTweetsActive24","queryString","query","list","Object","keys","map","encodeURIComponent","join","api","allQueryParams","fetch","headers","Accept","response","json","deepEqual","require","TweetsContext","currentInterval","dataset","intervals","useStatus","status","setStatus","previousStatus","setPreviousStatus","useEffect","delay","intervalId","setInterval","newStatus","clearInterval","TweetsProvider","filters","initialValue","filteredByArea","activeOrMajorForArea","activeOrMajorByArea","byTypeForArea","groupedByArea","history","active24","major24","annotations","setValue","mostRecentId","undefined","setFilteredByArea","setActiveOrMajorForArea","setActiveOrMajorByArea","setByTypeForArea","setGroupedByArea","setHistory","setActive24","setMajor24","setAnnotations","values","useTweets","MapOptions","ProxyLight","url","r","attribution","ProxyDark","CartoDB_DarkMatter","ext","subdomains","CartoDB_DarkMatterNoLabels","CartoDB_Positron","CartoDB_PositronNoLabels","Jawg_Dark","token","Jawg_Light","Mapbox","Stadia_Alidade","Stamen_Toner","Default","NoLabels","byArea","features","prop","forEach","feature","properties","push","nhoodFeaturesByArea","zipCodes","nhoods","featuresForArea","nhood","areas","geojson","areaProp","cityGeojson","city","defaultCentroid","mapBounds","lat","long","centroid","length","warn","coords","geometry","flat","latExtent","d3","longExtent","zoom","geojsonStyleBounds","strokeOpacity","geojsonStyleActive","fillColor","Map","tileOptions","useContext","typeFilter","selectedTweet","activeArea","rendered","filter","defaultZoom","derived","isSelectedDot","id_str","data","selectedIndex","findIndex","slice","appearanceFn","d","minZoom","maxZoom","maxBounds","maxBoundsViscosity","zoomControl","TileLayer","GeoJSON","style","appearance","geojsonStyle","AreaShape","attributionControl","dragging","keyboard","intervalExtent","start","end","expandMinutes","expand","extent","offset","isPhone","window","matchMedia","matches","isActive","isAtLeastSev1","isAtLeastSev2","SvgDot","sev1","sev2","classnames","svgStyles","live","width","height","cx","size","cy","Spark","showTotal","title","useCumulative","showPrevious","svgData","setSvgData","nowDot","setNowDot","svgWidth","svgHeight","margin","accessor","cumulative","xExtent","yExtent","flatMap","bins","xScale","domain","range","yScale","line","curve","tension","x","x0","y","newSvgData","path","reverse","lastBin","total","lastIndex","sparkStyles","svg","transform","i","current","now","MultiLine","showHeader","xAxisRef","useRef","yAxisRef","dateFormatter","xAxis","tickFormat","tickSize","scale","ticks","every","call","yAxis","chartStyles","header","chart","axis","ref","GroupByArea","totalsMap","setTotalsMap","neighborhoodsMap","CRA_NAM","sort","getNeighborhoods","itemContainer","to","vpadding","fullWidth","item","right","text","v","major","Paragraph","content","paragraph","Header","Topline","number","topline","Rehoboam","svgPath","setSvgPath","sev2Circles","setSev2Circles","axisRef","maxLength","radialData","timestamp","fraction","Math","PI","toRadial","radialGen","angleScale","tickValues","h","axisRadialInner","sev2Data","Array","_","index","circles","toRadialDot","theta","sin","cos","rehoboamStyles","counter","circle","highlight","dots","c","TypeLegend","legend","showLabels","contextKey","counts","max","widthFn","body","selected","onClick","handleClick","label","rx","GroupByOptions","AreaAccessors","ZipCode","zip","Area","neighborhoodGroup","AreaSecondary","neighborhood","useLegend","setLegend","sublegend","groups","legendByType","newLegend","LegendSection","typeLegend","setTypeLegend","option","Histogram","binsLowRes","b","temp","bin","floor","x1","binWidth","Section","styleOption","edgeToEdge","style1","style2","styleMap","styleDefault","section","subcontent","textureCurrent","textures","lines","lighter","orientation","texturePrevious","Annotations","rectWidth","scales","currentStart","clipPaths","calloutsRef","regionsRef","regions","setRegions","calloutFn","isEnd","sideX","sideY","callout","note","subject","nx","ny","dx","dy","calloutsFn","calloutsSvgData","Boolean","d3annotation","d3annotationCalloutCircle","newRegions","isCurrent","texture","id","previous","annotation","clipPath","closedPath","first","extraBottom","extraTop","History","setScales","setCurrentStart","paths","setPaths","setClipPaths","yearWidth","maxBarWidth","annotationRectWidth","svgRef","intervalCurrent","intervalPrevious","binsCurrent","binsPrevious","timeExtent","lineCurrent","linePrevious","pathCurrent","pathPrevious","clipLineCurrent","clipLinePrevious","pixelOffset","invert","clipPathCurrent","clipPathPrevious","historyStyles","years","left","TweetDetails","tweet","address","units","unitsList","split","unitsStr","format","n","Number","parseFloat","toFixed","latlong","unit","TweetModes","Tweet","mode","isGreyedOut","isDetailed","time","timezone","detailed","greyedOut","newSelectedTweet","details","location","description","TweetList","tweets","t","TweetsActive","TweetsMajor","DispatchAll","intro","sources","href","notes","TweetsForArea","filtered","DispatchArea","App","app","from","default","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.3f5fc312.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"group_container___U6Y6\",\"itemContainer\":\"group_itemContainer__91pkk\",\"vpadding\":\"group_vpadding__3db4T\",\"fullWidth\":\"group_fullWidth__33LFP\",\"right\":\"group_right__2euLw\",\"item\":\"group_item__1Q6Q7\",\"text\":\"group_text__1JC9o\",\"list\":\"group_list__c2KEa\",\"major\":\"group_major__2byd-\"};","import React, { useState, createContext } from \"react\";\n\nexport const UserContext = createContext();\n\nexport const UserContextKeys = {\n  SelectedTweet: \"SelectedTweet\",\n  HoverArea: \"HoverArea\",\n  TypeFilter: \"TypeFilter\",\n};\n\nconst useUser = () => {\n  const [user, setUser] = useState({});\n\n  const setSelection = (key, value) => {\n    console.log(`USER: ${key} -->`, value);\n    setUser({ ...user, [key]: value });\n  };\n\n  return { user, setSelection };\n};\n\nexport const UserProvider = ({ children }) => {\n  return (\n    <UserContext.Provider value={useUser()}>{children}</UserContext.Provider>\n  );\n};\n","import React from \"react\";\nimport { UserProvider } from \"./UserProvider\";\nimport styles from \"./dispatch.module.scss\";\n\nexport const Dispatch = ({ area, type, interval, children }) => {\n  console.log(`URL params/area: ${area}, type: ${type}, interval: ${interval}`);\n  return (\n    <div className={styles.container}>\n      <UserProvider>{children}</UserProvider>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Circle } from \"react-leaflet\";\n\nexport const Appearance = {\n  Normal: 0,\n  Dimmed: -1,\n  Highlighted: 1,\n};\n\nexport const Dot = ({ coordinates, severity = 0, active = false }) => {\n  const color = active ? \"red\" : \"white\";\n  let opacity = 0.4;\n  if (severity >= 1) {\n    opacity = 0.7;\n  }\n  if (active) {\n    opacity = 0.9;\n  }\n  const baseRadius = active ? 250 : 150;\n\n  return (\n    <>\n      <Circle\n        center={coordinates}\n        radius={baseRadius}\n        color={color}\n        fill={true}\n        fillOpacity={opacity}\n        stroke={false}\n      ></Circle>\n      {severity >= 1 && (\n        <Circle\n          center={coordinates}\n          radius={baseRadius + 150}\n          weight={2}\n          color={color}\n          opacity={opacity}\n          fill={false}\n        ></Circle>\n      )}\n      {severity >= 2 && (\n        <Circle\n          center={coordinates}\n          radius={baseRadius + 300}\n          weight={2}\n          color={color}\n          opacity={opacity}\n          fill={false}\n        ></Circle>\n      )}\n    </>\n  );\n}\n","export async function getEnv() {\n  return getByAPI(\"env\");\n}\n\nexport async function getStatus() {\n  return getByAPI(`/dispatch/status`);\n}\n\nexport async function getAnnotations() {\n  return getByAPI(`dispatch/history/annotations`);\n}\n\nexport async function getHistory() {\n  return getByAPI(`dispatch/history`);\n}\n\nexport async function getTweetsForArea(\n  area,\n  queryParams = { activeOrMajor: false, minimize: false }\n) {\n  return getByAPI(`dispatch/tweets/${area}`, queryParams);\n}\n\nexport async function getTweetsByArea(queryParams = { activeOrMajor: false }) {\n  return getByAPI(`dispatch/tweets/byArea`, queryParams);\n}\n\nexport async function getTweetsByType(area = \"seattle\") {\n  return getByAPI(`dispatch/tweets/byType/${area}`, { minimize: false });\n}\n\nexport async function getTweetsMajor24() {\n  return getByAPI(\"dispatch/tweets/major24\", { minimize: false });\n}\n\nexport async function getTweetsActive24() {\n  return getByAPI(\"dispatch/tweets/active24\", { minimize: false });\n}\n\nexport async function getTweetsStatic() {\n  return getByAPI(\"dispatch/static\");\n}\n\nexport async function getTweetsSeattleGov() {\n  return getByAPI(\"dispatch/seattle-gov\");\n}\n\nconst queryString = (query = {}) => {\n  const list = Object.keys(query).map(\n    (key) => `${encodeURIComponent(key)}=${encodeURIComponent(query[key])}`\n  );\n  return list.join(\"&\");\n};\n\nasync function getByAPI(api = \"\", queryParams = {}) {\n  const allQueryParams = {\n    minimize: true,\n    ...queryParams,\n  };\n  const query = queryString(allQueryParams);\n  const response = await fetch(`/api/${api}?${query}`, {\n    // TODO - use axios?\n    headers: { Accept: \"application-json\" },\n  });\n\n  return response.json();\n}\n","import React, { createContext } from \"react\";\nimport { useState, useEffect } from \"react\";\nimport {\n  getTweetsForArea,\n  getTweetsByArea,\n  getTweetsByType,\n  getHistory,\n  getAnnotations,\n  getTweetsActive24,\n  getTweetsMajor24,\n  getStatus,\n} from \"../api\";\nconst deepEqual = require(\"fast-deep-equal/es6/react\");\nexport const TweetsContext = createContext();\n\nexport const currentInterval = (dataset) => dataset[0].intervals[0];\nexport const previousInterval = (dataset) => dataset[0].intervals[1];\n\nconst useStatus = () => {\n  const [status, setStatus] = useState({});\n  const [previousStatus, setPreviousStatus] = useState({});\n\n  useEffect(() => {\n    const delay = 30 * 1000;\n\n    console.log(\n      `🟥 useStatus/starting checker @ every ${delay / 1000} seconds`\n    );\n\n    const checkForUpdates = async () => {\n      const newStatus = await getStatus();\n      console.log(\n        `useStatus(${intervalId})/current status (next check in ${\n          delay / 1000\n        } sec)`,\n        newStatus\n      );\n\n      if (!deepEqual(newStatus, status)) {\n        console.log(\"useStatus/setting new status:\", newStatus);\n        setPreviousStatus({ ...status });\n        setStatus(newStatus);\n      }\n    };\n\n    const intervalId = setInterval(checkForUpdates, delay);\n    return () => clearInterval(intervalId);\n  }, [status]);\n\n  return { status, previousStatus };\n};\n\nconst useTweets = (filters = {}) => {\n  const initialValue = {\n    filteredByArea: [],\n    activeOrMajorForArea: [],\n    activeOrMajorByArea: [],\n    byTypeForArea: [],\n    groupedByArea: [],\n    history: [],\n    active24: [],\n    major24: [],\n    annotations: [],\n    status: {},\n  };\n  const [value, setValue] = useState(initialValue);\n  const { status, previousStatus } = useStatus();\n  console.log(\n    `useTweets/most recent:${status.mostRecentId}, previous:${previousStatus.mostRecentId}`\n  );\n  const mostRecentId = previousStatus.mostRecentId\n    ? status.mostRecentId\n    : undefined;\n\n  const [filteredByArea, setFilteredByArea] = useState([]);\n  const [activeOrMajorForArea, setActiveOrMajorForArea] = useState([]);\n  const [activeOrMajorByArea, setActiveOrMajorByArea] = useState([]);\n  const [byTypeForArea, setByTypeForArea] = useState([]);\n  const [groupedByArea, setGroupedByArea] = useState([]);\n  const [history, setHistory] = useState([]);\n  const [active24, setActive24] = useState([]);\n  const [major24, setMajor24] = useState([]);\n  const [annotations, setAnnotations] = useState([]);\n\n  useEffect(() => {\n    console.log(\"🟢 PROVIDER/fetching all data\");\n\n    (async () => {\n      const area = filters.area || \"seattle\";\n      setFilteredByArea(await getTweetsForArea(area));\n    })();\n\n    (async () => {\n      const area = filters.area || \"seattle\";\n      setActiveOrMajorForArea(\n        await getTweetsForArea(area, { activeOrMajor: true, minimize: false })\n      );\n    })();\n\n    (async () => {\n      setByTypeForArea(await getTweetsByType(filters.area || \"seattle\"));\n    })();\n\n    (async () => {\n      setGroupedByArea(await getTweetsByArea());\n    })();\n\n    (async () => {\n      setActiveOrMajorByArea(\n        await getTweetsByArea({ activeOrMajor: true, minimize: false })\n      );\n    })();\n\n    (async () => {\n      const area = filters.area || \"seattle\";\n      setHistory(await getHistory(area));\n    })();\n\n    (async () => {\n      setAnnotations(await getAnnotations());\n    })();\n\n    (async () => {\n      const response = await getTweetsActive24();\n      setActive24(response[0].intervals[0].values);\n    })();\n\n    (async () => {\n      const response = await getTweetsMajor24();\n      setMajor24(response[0].intervals[0].values);\n    })();\n  }, [filters.area, mostRecentId]);\n\n  useEffect(() => {\n    setValue({\n      filteredByArea,\n      byTypeForArea,\n      groupedByArea,\n      history,\n      annotations,\n      active24,\n      major24,\n      activeOrMajorForArea,\n      activeOrMajorByArea,\n      status,\n    });\n  }, [\n    active24,\n    activeOrMajorByArea,\n    activeOrMajorForArea,\n    annotations,\n    byTypeForArea,\n    filteredByArea,\n    groupedByArea,\n    history,\n    major24,\n    status,\n  ]);\n\n  return value;\n};\n\nexport const TweetsProvider = ({ filters, children }) => {\n  const value = useTweets(filters);\n  return (\n    <TweetsContext.Provider value={value}>{children}</TweetsContext.Provider>\n  );\n};\n","export const MapOptions = {\n  ProxyLight: {\n    url: \"/api/dispatch/maps/{s}/{x}/{y}/{z}/{r}/light\",\n    r: \"@2x\",\n    attribution:\n      '<a href=\"http://jawg.io\" title=\"Tiles Courtesy of Jawg Maps\">&copy; <b>Jawg</b>Maps</a> &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  },\n  ProxyDark: {\n    url: \"/api/dispatch/maps/{s}/{x}/{y}/{z}/{r}/dark\",\n    r: \"@2x\",\n    attribution:\n      '<a href=\"http://jawg.io\" title=\"Tiles Courtesy of Jawg Maps\">&copy; <b>Jawg</b>Maps</a> &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  },\n  CartoDB_DarkMatter: {\n    url: \"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png\",\n    ext: \"png\",\n    r: \"@2x\",\n    subdomains: \"abcd\",\n    attribution:\n      '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n  },\n  CartoDB_DarkMatterNoLabels: {\n    url: \"https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png\",\n    ext: \"png\",\n    r: \"@2x\",\n    subdomains: \"abcd\",\n    attribution:\n      '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n  },\n  CartoDB_Positron: {\n    subdomains: \"abcd\",\n    url: \"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png\",\n    ext: \"png\",\n    r: \"@2x\",\n\n    attribution:\n      '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n  },\n  CartoDB_PositronNoLabels: {\n    subdomains: \"abcd\",\n    url: \"https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png\",\n    ext: \"png\",\n    r: \"@2x\",\n\n    attribution:\n      '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n  },\n  Jawg_Dark: {\n    url:\n      \"https://{s}.tile.jawg.io/jawg-dark/{z}/{x}/{y}{r}.{ext}?access-token={token}\",\n    ext: \"png\",\n    r: \"@2x\",\n    subdomains: \"abcd\",\n    attribution:\n      '<a href=\"http://jawg.io\" title=\"Tiles Courtesy of Jawg Maps\">&copy; <b>Jawg</b>Maps</a> &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n    token: \"nMsnktvLJ03hHw3Bk4ehaEaNPGKjBE2pLhYTEcMdFEu65cNh4nMfXhGCdEwmhD7H\", // https://www.jawg.io/lab/access-tokens\n  },\n  Jawg_Light: {\n    url:\n      \"https://{s}.tile.jawg.io/jawg-light/{z}/{x}/{y}{r}.{ext}?access-token={token}\",\n    ext: \"png\",\n    r: \"@2x\",\n    subdomains: \"abcd\",\n    attribution:\n      '<a href=\"http://jawg.io\" title=\"Tiles Courtesy of Jawg Maps\">&copy; <b>Jawg</b>Maps</a> &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n    token: \"nMsnktvLJ03hHw3Bk4ehaEaNPGKjBE2pLhYTEcMdFEu65cNh4nMfXhGCdEwmhD7H\", // https://www.jawg.io/lab/access-tokens\n  },\n  Mapbox: {\n    // accessToken: \"pk.eyJ1IjoiYW5hcnNleWYiLCJhIjoiY2thZXlra3llMGF4MDJ4cXYzY2ZkamVkdyJ9.K8CENC0jz2D0O6ziL_jnNg\"\n  },\n  Stadia_Alidade: {\n    url:\n      \"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.{ext}\",\n    ext: \"png\",\n    r: \"@2x\",\n    attribution:\n      '&copy; <a href=\"https://stadiamaps.com/\">Stadia Maps</a>, &copy; <a href=\"https://openmaptiles.org/\">OpenMapTiles</a> &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors',\n  },\n  Stamen_Toner: {\n    url: \"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.{ext}\",\n    ext: \"png\",\n    r: \"@2x\",\n    subdomains: \"abcd\",\n    attribution:\n      'Tiles by <a href=\"http://stamen.com\">Stamen</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OSM</a>',\n  },\n};\n\n// MapOptions.Default = MapOptions.Jawg_Dark;\n// MapOptions.NoLabels = MapOptions.Jawg_Dark;\nMapOptions.Default = MapOptions.ProxyDark;\nMapOptions.NoLabels = MapOptions.Default;\n","import * as d3 from \"d3\";\nimport zipCodes from \"./zip-codes.json\";\n// import nhoods from \"./nhoods.json\";\nimport nhoods from \"./2016_seattle_cra.json\";\nimport city from \"./2016_seattle_city.json\";\n\nconst nhoodProp = \"NEIGHBO\"; // TODO - import from server/groupby.js\nconst zipcodeProp = \"GEOID10\";\n\nconst byArea = (features, prop) => {\n  const map = {};\n  features.forEach((feature) => {\n    const key = feature.properties[prop];\n    const list = map[key] || [];\n    list.push(feature);\n    map[key] = list;\n  });\n  return map;\n};\n\nconst zipcodeFeaturesByArea = byArea(zipCodes.features, zipcodeProp);\nconst nhoodFeaturesByArea = byArea(nhoods.features, nhoodProp);\n\nconst featuresForZip = (zip) => zipcodeFeaturesByArea[zip];\nconst featuresForNhood = (nhood) => nhoodFeaturesByArea[nhood];\n\nexport const featuresForArea = featuresForNhood;\n\nexport const areas = {\n  geojson: nhoods,\n  areaProp: nhoodProp,\n};\n\nexport const cityGeojson = city;\n\nconst lat = 47.60912,\n  long = -122.34494;\nconst defaultCentroid = [lat, long];\n\nexport const mapBounds = [\n  [lat + 0.2, long - 0.3],\n  [lat - 0.2, long + 0.3],\n];\n\nexport const centroid = (features) => {\n  if (!features.length) {\n    console.warn(\n      `Cannot compute centroid, returning default: ${defaultCentroid}`\n    );\n    return defaultCentroid;\n  }\n  let coords = features\n    .map(({ geometry: { coordinates } }) => coordinates)\n    .flat(2);\n  const latExtent = d3.extent(coords, ([_, lat]) => lat);\n  const longExtent = d3.extent(coords, ([long, _]) => long);\n  return [d3.mean(latExtent), d3.mean(longExtent)];\n};\n","import React, { useContext } from \"react\";\nimport { Map as LeafletMap, TileLayer, GeoJSON } from \"react-leaflet\";\nimport { Dot, Appearance } from \"./Dot\";\nimport { TweetsContext } from \"./TweetsProvider\";\nimport { UserContext, UserContextKeys } from \"./UserProvider\";\nimport { MapOptions } from \"./mapOptions\";\nimport { centroid, areas, cityGeojson, mapBounds } from \"./geojson\";\nimport \"./leaflet.scss\";\nimport styles from \"./map.module.scss\";\n\nconst minZoom = 10,\n  maxZoom = 13,\n  defaultZoom = 11;\nlet zoom = defaultZoom;\n\nconst overlayColor = \"dodgerblue\";\nconst activeColor = \"dodgerblue\";\nconst geojsonStyleBounds = {\n  color: \"#1e90ff66\", // dodgerblue with alpha\n  fillOpacity: 0,\n  strokeOpacity: 0.5,\n  weight: 4,\n};\nconst geojsonStyleActive = {\n  color: activeColor,\n  fillColor: activeColor,\n  fillOpacity: 0.15,\n  weight: 2,\n};\n\nexport const Map = ({ area, tileOptions = MapOptions.Default }) => {\n  const { byTypeForArea } = useContext(TweetsContext);\n  const { user } = useContext(UserContext);\n  const typeFilter = user[UserContextKeys.TypeFilter];\n\n  const { geojson, areaProp } = areas;\n\n  const selectedTweet = user[UserContextKeys.SelectedTweet];\n  const hoverArea = user[UserContextKeys.HoverArea];\n\n  const activeArea = hoverArea || area;\n  // console.log(\"MAP/active area\", activeArea);\n\n  const renderFilter = ({ properties }) =>\n    activeArea && properties[areaProp] === activeArea;\n\n  const { features } = geojson;\n  const rendered = features.filter(renderFilter);\n\n  if (area) {\n    zoom = defaultZoom + 1;\n  }\n  if (selectedTweet) {\n    zoom = maxZoom;\n  }\n\n  const center = selectedTweet\n    ? [selectedTweet.derived.lat, selectedTweet.derived.long]\n    : centroid(features);\n\n  const mapper = ({ intervals }) =>\n    intervals[0].values.map(\n      ({ id_str, derived: { lat, long, type, color, active, severity } }) => ({\n        id_str,\n        lat,\n        long,\n        type,\n        color,\n        active,\n        severity,\n      })\n    );\n\n  const isSelectedDot = ({ id_str }) => selectedTweet.id_str === id_str;\n\n  let data = [];\n\n  if (byTypeForArea.length) {\n    data = byTypeForArea\n      .map(mapper)\n      .flat()\n      .filter(({ type }) => !typeFilter || typeFilter === type);\n\n    if (selectedTweet) {\n      // Render selected dot last, so it appears on top\n      const selectedIndex = data.findIndex(isSelectedDot);\n\n      data =\n        selectedIndex === -1\n          ? []\n          : [\n              ...data.slice(0, selectedIndex),\n              ...data.slice(selectedIndex + 1),\n              data[selectedIndex],\n            ];\n    }\n  }\n\n  const appearanceFn = (d) => {\n    return selectedTweet\n      ? isSelectedDot(d)\n        ? Appearance.Highlighted\n        : Appearance.Dimmed\n      : Appearance.Normal;\n  };\n\n  console.log(`MAP/rendering with ${data.length} dots, ${rendered.length} geo, center: ${center}`);\n  const city = cityGeojson.features[0];\n\n  return (\n    <LeafletMap\n      className={styles.container}\n      center={center}\n      zoom={zoom}\n      minZoom={minZoom}\n      maxZoom={maxZoom}\n      maxBounds={mapBounds}\n      maxBoundsViscosity={0.6}\n      zoomControl={false}\n    >\n      <TileLayer {...tileOptions} />\n      <GeoJSON data={city} style={geojsonStyleBounds} />\n      {rendered.map((feature) => (\n        <GeoJSON data={feature} style={geojsonStyleActive} />\n      ))}\n      {data.map((d) => (\n        <Dot // TODO - group under a single container?\n          coordinates={[d.lat, d.long]}\n          severity={d.severity}\n          appearance={appearanceFn(d)}\n          active={d.active}\n          // color={d.color}\n        ></Dot>\n      ))}\n    </LeafletMap>\n  );\n};\n","import React from \"react\";\nimport { Map as LeafletMap, TileLayer, GeoJSON } from \"react-leaflet\";\nimport { featuresForArea, centroid } from \"./geojson\";\nimport { MapOptions } from \"./mapOptions\";\nimport styles from \"./area.module.scss\";\n\nconst geojsonStyle = {\n  color: \"dodgerblue\",\n  fillColor: \"dodgerblue\",\n  fillOpacity: 0.15,\n  weight: 1,\n};\n\nexport const AreaShape = ({ area }) => {\n  const features = featuresForArea(area);\n  if (!features || !features.length) {\n    console.warn(\"AreaShape/no features for area\", area);\n    return null;\n  }\n\n  const center = centroid(features);\n  const zoom = 10;\n  const tileOptions = MapOptions.NoLabels;\n\n  return (\n    <LeafletMap\n      className={styles.container}\n      center={center}\n      zoom={zoom}\n      minZoom={zoom}\n      maxZoom={zoom}\n      zoomControl={false}\n      attributionControl={false}\n      dragging={false}\n      keyboard={false}\n    >\n      <TileLayer {...tileOptions} />\n      <GeoJSON data={features} style={geojsonStyle} />\n    </LeafletMap>\n  );\n};\n","import * as d3 from \"d3\";\nimport { tz as timezone } from \"moment-timezone\";\n\nexport const intervalExtent = ({ start, end }, expandMinutes = 0) =>\n  expand([start, end], expandMinutes);\n\n// move to server/histogram.js\nexport const expand = (extent, expandMinutes = 0) => [\n  d3.timeMinute.offset(extent[0], -expandMinutes),\n  d3.timeMinute.offset(extent[1], expandMinutes),\n];\n\n// TODO - coordinate with section.module.scss, or find a way to use vars\n\nconst maxWidthPhone = 600;\nexport const getMaxWidth = () => 400; // TODO - useWindowSize()\n\nexport const isPhone = () => {\n  const query = window.matchMedia(\n    `only screen and (max-device-width: ${maxWidthPhone}px)`\n  );\n  return query.matches;\n};\n\nexport const toPacificStr = (timestamp) =>\n  timezone(timestamp, \"America/Vancouver\").format(\"h:mma\");\n\nexport const isActive = ({ derived: { active } }) => active;\nexport const isAtLeastSev1 = ({ derived: { severity } }) => severity >= 1;\nexport const isAtLeastSev2 = ({ derived: { severity } }) => severity >= 2;\n\nexport const isExactlySev1 = ({ derived: { severity } }) => severity === 1;\nexport const isExactlySev2 = ({ derived: { severity } }) => severity === 2;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport svgStyles from \"./svg.module.scss\";\n\nexport const SvgDot = ({ active = false, sev1 = false, sev2 = false }) => {\n  const color = active ? \"red\" : \"white\";\n  const size = 18,\n    innerRadius = 3,\n    sev1Radius = 5,\n    sev2Radius = 8;\n\n  return (\n    <svg\n      className={classnames({ [svgStyles.live]: active })}\n      width={size}\n      height={size}\n    >\n      <circle cx={size / 2} cy={size / 2} r={innerRadius} fill={color} />\n      {(sev1 || sev2) && (\n        <circle\n          cx={size / 2}\n          cy={size / 2}\n          r={sev1Radius}\n          fill=\"none\"\n          stroke={color}\n        />\n      )}\n      {sev2 && (\n        <circle\n          cx={size / 2}\n          cy={size / 2}\n          r={sev2Radius}\n          fill=\"none\"\n          stroke={color}\n        />\n      )}\n    </svg>\n  );\n};\n","import React, { useEffect, useState, useRef } from \"react\";\nimport classnames from \"classnames\";\nimport * as d3 from \"d3\";\nimport sparkStyles from \"./spark.module.scss\";\nimport svgStyles from \"./svg.module.scss\";\nimport { intervalExtent, isPhone } from \"../clientUtils\";\n\nexport const Spark = ({  intervals = [],\n  title,\n  showTotal,\n  useCumulative,\n  showPrevious\n}) => {\n  const [svgData, setSvgData] = useState([]);\n  const [nowDot, setNowDot] = useState(null);\n\n  const svgWidth = isPhone ? 100 : 150;\n  const svgHeight = 0.2 * svgWidth,\n    margin = { top: 5, right: 5, bottom: 5, left: 5 },\n    width = svgWidth - margin.left - margin.right,\n    height = svgHeight - margin.bottom - margin.top;\n\n  useEffect(() => {\n    // TODO - no need for useEffect?\n    if (!intervals.length) {\n      return;\n    }\n\n    const data = (showPrevious ? intervals : intervals.slice(0,1));\n\n    const accessor = ({ length, cumulative }) =>\n      useCumulative ? cumulative : length;\n\n    const xExtent = intervalExtent(data[0]);\n\n    const yExtent = [\n      0,\n      d3.max([1.0, ...data.flatMap(({ bins }) => bins).map(accessor)]),\n    ];\n\n    const xScale = d3.scaleTime().domain(xExtent).range([0, width]);\n    const yScale = d3.scaleLinear().domain(yExtent).range([height, 0]);\n    \n    const line = d3\n      .line()\n      .curve(d3.curveCardinal.tension(0.3))\n      .x((d) => xScale(d.x0))\n      .y((d) => yScale(accessor(d)));\n\n    const paths = data.map((d) => d.bins).map(line);\n\n    let newSvgData = paths.map((path) => ({ path })).reverse(); // render highlight after all others\n\n    setSvgData(newSvgData);\n\n    const bins = data[0].bins;\n    const lastBin = bins[bins.length - 1];\n    setNowDot({\n      cx: xScale(lastBin.x0),\n      cy: yScale(accessor(lastBin)),\n      r: 3,\n    });\n  }, [width, height, intervals, showPrevious, useCumulative]);\n\n  if (!intervals.length) {\n    return null;\n  }\n\n  const total = intervals[0].total;\n  const lastIndex = svgData.length - 1;\n\n  return (\n    <div className={sparkStyles.container}>\n      \n      <svg className={sparkStyles.svg} width={svgWidth} height={svgHeight}>\n        <g transform={`translate(${margin.left},${margin.top})`}>\n          <g>\n            {svgData.map((d, i) => (\n              <path\n                className={classnames(svgStyles.path, {\n                  [svgStyles.current]: i === lastIndex,\n                })}\n                d={d.path}\n              />\n            ))}\n          </g>\n          {nowDot && (\n            <g className={svgStyles.now}>\n              <circle {...nowDot} />\n            </g>\n          )}\n        </g>\n      </svg>\n      {showTotal && <span className={sparkStyles.total}>{total}</span>}\n    </div>\n  );\n}\n","import React, { useEffect, useState, useRef } from \"react\";\nimport classnames from \"classnames\";\nimport * as d3 from \"d3\";\nimport chartStyles from \"./chart.module.scss\";\nimport svgStyles from \"./svg.module.scss\";\nimport { intervalExtent, isPhone } from \"../clientUtils\";\n\nexport const MultiLine = ({\n  intervals = [],\n  title,\n  showHeader = false,\n  useCumulative,\n}) => {\n  const [svgData, setSvgData] = useState([]);\n  const [nowDot, setNowDot] = useState(null);\n\n  const svgWidth = isPhone ? 350 : 500;\n  const svgHeight = 0.35 * svgWidth,\n    margin = { top: 20, right: 30, bottom: 20, left: 30 },\n    width = svgWidth - margin.left - margin.right,\n    height = svgHeight - margin.bottom - margin.top;\n\n  const xAxisRef = useRef(null);\n  const yAxisRef = useRef(null);\n\n  useEffect(() => {\n    // TODO - no need for useEffect?\n    if (!intervals.length) {\n      return;\n    }\n    const accessor = ({ length, cumulative }) =>\n      useCumulative ? cumulative : length;\n\n    const xExtent = intervalExtent(intervals[0]);\n\n    const yExtent = [\n      0,\n      d3.max([1.0, ...intervals.flatMap(({ bins }) => bins).map(accessor)]),\n    ];\n\n    const dateFormatter = d3.timeFormat(\"%-I%p\"); // https:/github.com/d3/d3-time-format#locale_format\n\n    const xScale = d3.scaleTime().domain(xExtent).range([0, width]);\n    const xAxis = d3\n      .axisBottom()\n      .tickFormat(dateFormatter)\n      .tickSize(3)\n      .scale(xScale)\n      .ticks(d3.timeHour.every(12));\n    d3.select(xAxisRef.current).call(xAxis);\n\n    const yScale = d3.scaleLinear().domain(yExtent).range([height, 0]);\n    const yAxis = d3.axisLeft().scale(yScale).ticks(2);\n    d3.select(yAxisRef.current).call(yAxis);\n\n    const line = d3\n      .line()\n      .curve(d3.curveCardinal.tension(0.3))\n      .x((d) => xScale(d.x0))\n      .y((d) => yScale(accessor(d)));\n\n    const paths = intervals.map((d) => d.bins).map(line);\n\n    let newSvgData = paths.map((path) => ({ path })).reverse(); // render highlight after all others\n\n    setSvgData(newSvgData);\n\n    const bins = intervals[0].bins;\n    const lastBin = bins[bins.length - 1];\n    setNowDot({\n      cx: xScale(lastBin.x0),\n      cy: yScale(accessor(lastBin)),\n      r: 3,\n    });\n  }, [height, intervals, useCumulative, width]);\n\n  if (!intervals.length) {\n    return null;\n  }\n\n  const total = intervals[0].total;\n  const lastIndex = svgData.length - 1;\n\n  return (\n    <div className={chartStyles.container}>\n      {showHeader && (\n        <div className={chartStyles.header}>\n          {title && <div className={chartStyles.title}>{title}</div>}\n          {typeof total === \"number\" && (\n            <div className={chartStyles.total}>{total}</div>\n          )}\n        </div>\n      )}\n      <svg className={chartStyles.chart} width={svgWidth} height={svgHeight}>\n        <g transform={`translate(${margin.left},${margin.top})`}>\n          <g\n            className={svgStyles.axis}\n            ref={xAxisRef}\n            transform={`translate(0,${height})`}\n          />\n          <g className={svgStyles.axis} ref={yAxisRef} />\n          <g>\n            {svgData.map((d, i) => (\n              <path\n                className={classnames(svgStyles.path, {\n                  [svgStyles.current]: i === lastIndex,\n                })}\n                d={d.path}\n              />\n            ))}\n          </g>\n          {nowDot && (\n            <g className={svgStyles.now}>\n              <circle {...nowDot} />\n            </g>\n          )}\n        </g>\n      </svg>\n    </div>\n  );\n}\n","import React, { useContext, useState, useEffect } from \"react\";\nimport { Link } from \"@reach/router\";\nimport { TweetsContext } from \"./TweetsProvider\";\nimport { AreaShape } from \"./AreaShape\";\nimport { featuresForArea } from \"./geojson\";\nimport { isActive, isAtLeastSev2, isAtLeastSev1 } from \"../clientUtils\";\nimport { SvgDot } from \"./SvgDot\";\nimport { Spark } from \"./Spark\";\nimport { MultiLine } from \"./MultiLine\";\nimport { Total } from \"./Total\";\nimport classnames from \"classnames\";\nimport styles from \"./group.module.scss\";\n\nexport const GroupByArea = () => {\n  const { groupedByArea, activeOrMajorByArea } = useContext(TweetsContext);\n  const [totalsMap, setTotalsMap] = useState({});\n\n  useEffect(() => {\n    const map = {};\n    activeOrMajorByArea.forEach(({ key: area, intervals }) => {\n      const values = intervals[0].values;\n      if (values.length) {\n        map[area] = {\n          active: values.filter(isActive).length,\n          sev1: values.filter(isAtLeastSev1).length,\n          sev2: values.filter(isAtLeastSev2).length,\n        };\n      }\n    });\n    setTotalsMap(map);\n  }, [groupedByArea, activeOrMajorByArea]);\n\n  if (!groupedByArea.length) {\n    return null;\n  }\n\n  const getNeighborhoods = () => {\n    const map = {};\n    groupedByArea\n      .map(({ key }) => key)\n      .forEach((key) => {\n        map[key] = featuresForArea(key)\n          .map(({ properties: { CRA_NAM } }) => CRA_NAM)\n          .sort();\n      });\n    return map;\n  };\n  const neighborhoodsMap = getNeighborhoods();\n\n  return (\n    <div className={styles.container}>\n      {groupedByArea.map(({ key: area, intervals }) => (\n        <div className={styles.itemContainer}>\n          <Link to={`${encodeURIComponent(area)}`}>\n            <div className={styles.vpadding}>\n              <div className={styles.fullWidth}>\n                <div className={styles.item}>&nbsp;</div>\n                <div className={classnames(styles.item, styles.right)}>\n                  <Spark\n                    intervals={intervals}\n                    useCumulative={true}\n                    showTotal={true}\n                  />\n                </div>\n              </div>\n\n              <div className={classnames(styles.item, styles.text)}>\n                <div>{area}</div>\n                <div className={styles.list}>\n                  {neighborhoodsMap[area].map((v) => (\n                    <div>• {v}</div>\n                  ))}\n                </div>\n              </div>\n\n              <div className={classnames(styles.item, styles.right)}>\n                <div>\n                  <AreaShape area={area} />\n                </div>\n                {/* <Total total={intervals[0].total} /> */}\n                {totalsMap[area] && (\n                  <div className={styles.major}>\n                    {totalsMap[area].active > 0 && (\n                      <span>\n                        <span>{totalsMap[area].active} active</span>\n                        <SvgDot active={true} />\n                      </span>\n                    )}\n                    {totalsMap[area].sev2 > 0 && (\n                      <span>\n                        <span>{totalsMap[area].sev2} major</span>\n                        <SvgDot sev2={true} />\n                      </span>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n          </Link>\n        </div>\n      ))}\n    </div>\n  );\n};\n","import React from \"react\";\nimport styles from \"./paragraph.module.scss\";\nimport classnames from \"classnames\";\n\nexport const Paragraph = ({ title = \"\", content = \"\", margin = false }) => {\n  return (\n    <div className={classnames(styles.paragraph, { [styles.margin]: margin })}>\n      {title && <h3>{title}</h3>}\n      <div className={styles.text}>{content}</div>\n    </div>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { TweetsContext } from \"./TweetsProvider\";\nimport { MultiLine } from \"./MultiLine\";\nimport { Paragraph } from \"./Paragraph\";\n\nexport const Header = ({ area }) => {\n  const { filteredByArea } = useContext(TweetsContext);\n\n  if (!filteredByArea.length) {\n    return null;\n  }\n\n  return (\n      <MultiLine\n        intervals={filteredByArea[0].intervals}\n        useCumulative={false}\n      />\n  );\n};\n","import React from \"react\";\nimport styles from \"./topline.module.scss\";\nexport const Topline = ({ number = 0, text }) => {\n  return (\n    <div className={styles.topline}>\n      {text && <div className={styles.text}>{text}</div>}\n      <div className={styles.number}>{number}</div>\n    </div>\n  );\n}\n","import React, { useContext, useEffect, useState, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport classnames from \"classnames\";\nimport { axisRadialInner } from \"d3-radial-axis\";\nimport { TweetsContext, currentInterval } from \"./TweetsProvider\";\nimport { intervalExtent } from \"../clientUtils\";\nimport { Topline } from \"./Topline\";\nimport rehoboamStyles from \"./rehoboam.module.scss\";\nimport svgStyles from \"./svg.module.scss\";\n\nexport const Rehoboam = ({ area }) => {\n  const { filteredByArea, activeOrMajorForArea } = useContext(TweetsContext);\n  const [svgPath, setSvgPath] = useState(null);\n  const [sev2Circles, setSev2Circles] = useState([]);\n  const axisRef = useRef(null);\n\n  const mainRadius = 100;\n  const margin = 30,\n    width = 2 * mainRadius,\n    height = 2 * mainRadius,\n    svgWidth = width + 2 * margin,\n    svgHeight = height + 2 * margin;\n\n  const dotRadius = 5;\n\n  useEffect(() => {\n    if (!filteredByArea.length) {\n      return;\n    }\n\n    const current = currentInterval(filteredByArea);\n    // const bins = current.binsHiRes;\n    const bins = current.bins;\n    const extent = intervalExtent(current);\n    const maxDisturbance = margin / 2;\n    const maxLength = d3.max(bins, ({ length }) => length);\n    const [start, end] = extent;\n\n    const toRadial = (timestamp, length) => {\n      const fraction = (timestamp - start) / (end - start);\n      const radians = 2 * Math.PI * fraction;\n      const disturbance = maxLength ? maxDisturbance * (length / maxLength) : 0;\n      return [radians, mainRadius + disturbance];\n    };\n\n    const radialData = bins.map(({ x0, length }) => toRadial(x0, length));\n    const radialGen = d3.lineRadial().curve(d3.curveCardinal.tension(0.4));\n    const path = radialGen(radialData);\n    setSvgPath(path);\n\n    const angleScale = d3\n      .scaleLinear()\n      .domain(extent)\n      .range([0, 2 * Math.PI]);\n    const HOUR = 3600 * 1000;\n    const dateFormatter = d3.timeFormat(\"%-I%p\"); // https://github.com/d3/d3-time-format#locale_format\n    const tickValues = [0, 6, 12, 18].map((h) => current.start + h * HOUR);\n    const axis = axisRadialInner(angleScale, mainRadius)\n      .tickFormat(dateFormatter)\n      .tickSize(0)\n      .tickValues(tickValues); // for some reason d3.timeHour.every() doesn't work here\n    d3.select(axisRef.current).call(axis);\n\n    if (activeOrMajorForArea.length) {\n      const toRadialDot = (timestamp, index) => {\n        const fraction = (timestamp - start) / (end - start);\n        const radians = 2 * Math.PI * fraction;\n        const offset = index * 2 * dotRadius;\n        return [radians, mainRadius + offset];\n      };\n\n      const activeOrMajorBins = currentInterval(activeOrMajorForArea).bins;\n      const toSev2Points = ({ x0, sev2 }) => {\n        const stack = [...new Array(sev2)].map((_, i) => ({\n          x0,\n          index: i,\n        }));\n        return stack;\n      };\n      const sev2Data = activeOrMajorBins.flatMap(toSev2Points);\n      console.log(\"REHOBOAM/sev2 data\", sev2Data);\n      const radialSev2Data = sev2Data.map(({ x0, index }) =>\n        toRadialDot(x0, index)\n      );\n\n      const circles = radialSev2Data.map(([theta, r]) => ({\n        cx: r * Math.sin(theta),\n        cy: r * -Math.cos(theta),\n        r: dotRadius,\n      }));\n\n      setSev2Circles(circles);\n    }\n  }, [activeOrMajorForArea, filteredByArea]);\n\n  const total = filteredByArea.length\n    ? currentInterval(filteredByArea).total\n    : 0;\n  const text = area || \"Seattle\";\n\n  console.log(\"REHOBOAM/render\");\n\n  return (\n    <div className={rehoboamStyles.container}>\n      <div className={rehoboamStyles.counter}>\n        <Topline number={total} text={text} />\n      </div>\n      <svg className={rehoboamStyles.svg} width={svgWidth} height={svgHeight}>\n        <g\n          transform={`translate(${margin + mainRadius},${margin + mainRadius})`}\n        >\n          <g className={svgStyles.axis} ref={axisRef} />\n          <circle\n            className={rehoboamStyles.circle}\n            cx={0}\n            cy={0}\n            r={mainRadius}\n          />\n          {svgPath && (\n            <path\n              className={classnames(\n                svgStyles.path,\n                svgStyles.highlight,\n                rehoboamStyles.path\n              )}\n              d={svgPath}\n            />\n          )}\n          <g className={rehoboamStyles.dots}>\n            {sev2Circles.map((c) => (\n              <>\n                <circle className={rehoboamStyles.sev2} {...c} />\n                <circle {...c} r={c.r + 3} fill=\"none\" stroke=\"white\" />\n              </>\n            ))}\n          </g>\n        </g>\n      </svg>\n    </div>\n  );\n};\n","import React, { useContext } from \"react\";\nimport styles from \"./legend.module.scss\";\nimport * as d3 from \"d3\";\nimport { UserContext, UserContextKeys } from \"./UserProvider\";\n\nexport const TypeLegend = ({ legend = [], title, showTotal, showLabels }) => {\n  const { user, setSelection } = useContext(UserContext);\n  const contextKey = UserContextKeys.TypeFilter;\n\n  if (!legend) {\n    return null;\n  }\n\n  const counts = legend.map(({ total }) => total);\n  const max = d3.max(counts);\n  const total = d3.sum(counts);\n  const maxWidth = 50;\n  const size = 10;\n\n  const widthFn = ({ total }) => d3.max([2, maxWidth * (total / max)]);\n\n  const handleClick = ({ key: type }) => {\n    const filter = user[contextKey];\n    setSelection(contextKey, filter === type ? undefined : type);\n  };\n\n  const filter = user[contextKey];\n\n  return (\n    <div className={styles.container}>\n      {title ||\n        (showTotal && (\n          <div className={styles.header}>\n            {showTotal && <div className={styles.total}>{total}</div>}\n            {title && <div className={styles.title}>{title}</div>}\n          </div>\n        ))}\n      <div className={styles.body}>\n        {legend.map((d) => (\n          <div\n            className={`${styles.item} ${\n              d.key === filter ? styles.selected : \"\"\n            }`}\n            onClick={() => handleClick(d)}\n          >\n            {showLabels && (\n              <div className={styles.label}>\n                {d.key}: {d.total}\n              </div>\n            )}\n            <svg className={styles.svg} width={widthFn(d)} height={size}>\n              <rect\n                x={0}\n                y={0}\n                width={widthFn(d)}\n                height={size}\n                rx={3}\n                fill={d.color}\n              ></rect>\n            </svg>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","// see groupby.js\nexport const GroupByOptions = {\n  // TODO - import from server\n  Nothing: undefined,\n  IncidentType: \"type\",\n  ZipCode: \"zip\",\n  Area: \"area\",\n  TimeInterval: \"time\",\n};\n\nexport const AreaAccessors = {\n  ZipCode: ({ derived: { zip } }) => zip,\n  Area: ({ derived: { neighborhoodGroup } }) => neighborhoodGroup,\n  AreaSecondary: ({ derived: { neighborhood } }) => neighborhood,\n};\nAreaAccessors.Default = AreaAccessors.Area;\n","import React, { useEffect, useContext, useState } from \"react\";\nimport { TweetsContext } from \"./TweetsProvider\";\nimport { GroupByOptions } from \"../groupingOptions\";\n\nconst legendByType = (groups) => {\n  // console.log(\"TODO useLegend/groups\", groups);\n  const legendByType = groups.map(({ key, color, intervals }) => {\n    return {\n      key,\n      color,\n      total: intervals[0].total,\n    };\n  });\n  return { [GroupByOptions.IncidentType]: legendByType };\n};\n\nexport const useLegend = () => {\n  const { byTypeForArea } = useContext(TweetsContext);\n  const [legend, setLegend] = useState({});\n\n  useEffect(() => {\n    if (!byTypeForArea.length) {\n      return;\n    }\n    const sublegend = legendByType(byTypeForArea);\n    console.warn(\"useLegend/setting main - TODO convert to context\");\n\n    const newLegend = { ...legend, ...sublegend };\n    console.log(\"new legend:\", newLegend);\n    setLegend(newLegend);\n  }, [byTypeForArea]);\n\n  return [legend];\n};\n","import React, { useEffect, useState, useRef, useContext } from \"react\";\nimport { TypeLegend } from \"./TypeLegend\";\nimport { useLegend } from \"./useLegend\";\nimport { GroupByOptions } from \"../groupingOptions\";\n\nexport const LegendSection = () => {\n  const [legend] = useLegend();\n  const [typeLegend, setTypeLegend] = useState([]);\n\n  useEffect(() => {\n    const option = GroupByOptions.IncidentType;\n    legend && legend[option] && setTypeLegend(legend[option]);\n  }, [legend]);\n\n  if (!typeLegend.length) {\n    return null;\n  }\n\n  return <TypeLegend legend={typeLegend} showLabels={true} />;\n};\n","import React, { useContext, useEffect, useState, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport { TweetsContext, currentInterval } from \"./TweetsProvider\";\nimport { intervalExtent, isPhone } from \"../clientUtils\";\nimport chartStyles from \"./chart.module.scss\";\nimport svgStyles from \"./svg.module.scss\";\n\nexport const Histogram = () => {\n  const { history } = useContext(TweetsContext);\n  const [svgData, setSvgData] = useState([]);\n\n  const svgWidth = isPhone ? 250 : 350,\n    svgHeight = 80,\n    margin = { top: 10, right: 10, bottom: 20, left: 30 },\n    width = svgWidth - margin.left - margin.right,\n    height = svgHeight - margin.bottom - margin.top;\n\n  const xAxisRef = useRef(null);\n  const yAxisRef = useRef(null);\n\n  useEffect(() => {\n    if (!history.length) {\n      return;\n    }\n\n    const interval = currentInterval(history);\n    const bins = interval.binsLowRes;\n    const extent = intervalExtent(interval, 60);\n    const xScale = d3.scaleTime().domain(extent).range([0, width]);\n\n    const yScale = d3\n      .scaleLinear()\n      .domain([0, d3.max(bins, (b) => b.length)])\n      .range([height, 0]);\n\n    const dateFormatter = d3.timeFormat(\"%-m/%-d\"); // https://github.com/d3/d3-time-format#locale_format\n\n    const xAxis = d3\n      .axisBottom()\n      .tickFormat(dateFormatter)\n      .scale(xScale)\n      .ticks(d3.timeMonth.every(1));\n    d3.select(xAxisRef.current).call(xAxis);\n\n    const yAxis = d3.axisLeft().scale(yScale).ticks(2);\n    d3.select(yAxisRef.current).call(yAxis);\n\n    let temp = 0;\n    if (bins.length) {\n      const bin = bins[0];\n      temp = Math.floor(xScale(bin.x1) - xScale(bin.x0));\n    }\n    const binWidth = Math.max(1, temp);\n\n    const newSvgData = bins.map(({ x0, length }) => ({\n      x: xScale(x0),\n      width: binWidth,\n      y: yScale(length),\n      height: yScale(0) - yScale(length),\n      rx: 4,\n    }));\n\n    setSvgData(newSvgData);\n  }, [height, history, width]);\n\n  return (\n    <div className={chartStyles.container}>\n      <svg className={chartStyles.svg} width={svgWidth} height={svgHeight}>\n        <g transform={`translate(${margin.left},${margin.top})`}>\n          {svgData.map((d) => (\n            <rect\n              x={d.x}\n              y={d.y}\n              width={d.width}\n              height={d.height}\n              rx={d.rx}\n            ></rect>\n          ))}\n        </g>\n        <g\n          className={svgStyles.axis}\n          ref={xAxisRef}\n          transform={`translate(${margin.left},${margin.top + height})`}\n        />\n        <g\n          className={svgStyles.axis}\n          ref={yAxisRef}\n          transform={`translate(${margin.left},${margin.top})`}\n        />\n      </svg>\n    </div>\n  );\n}\n","import React from \"react\";\nimport styles from \"./section.module.scss\";\n\nexport const Section = ({ children, styleOption = 0, edgeToEdge = false }) => {\n  const style =\n    styleOption === 1\n      ? styles.style1\n      : styleOption === 2\n      ? styles.style2\n      : styleOption === 3\n      ? styles.styleMap\n      : styles.styleDefault;\n  return (\n    <section className={`${styles.section} ${style}`}>\n      <div className={styles.content}>\n        <div\n          className={`${styles.subcontent} ${\n            edgeToEdge ? styles.edgeToEdge : \"\"\n          }`}\n        >\n          {children}\n        </div>\n      </div>\n    </section>\n  );\n};\n","import React, { useContext, useEffect, useState, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport textures from \"textures\";\nimport {\n  annotation as d3annotation,\n  annotationCalloutCircle as d3annotationCalloutCircle,\n} from \"d3-svg-annotation\";\nimport { TweetsContext } from \"./TweetsProvider\";\n\nimport styles from \"./annotations.module.scss\";\n\nconst textureCurrent = textures\n  .lines()\n  .lighter()\n  .size(8)\n  .orientation(\"6/8\")\n  .stroke(\"#51aae8\");\nconst texturePrevious = textures.lines().lighter().size(8).stroke(\"#51aae8\");\n\nexport const Annotations = ({ rectWidth, scales, currentStart, clipPaths }) => {\n  const calloutsRef = useRef(null);\n  const regionsRef = useRef(null);\n  const { annotations } = useContext(TweetsContext);\n  const [regions, setRegions] = useState([]);\n\n  d3.select(regionsRef.current).call(textureCurrent);\n  d3.select(regionsRef.current).call(texturePrevious);\n\n  useEffect(() => {\n    console.log(\"ANN/scales:\", scales);\n    if (!scales.length) {\n      return;\n    }\n\n    const regionFn = ({ start, end, offset }) => {\n      if (!start || !end) {\n        return undefined;\n      }\n\n      const [xScale, yScale] = scales;\n\n      const isCurrent = offset === 0;\n      const texture = isCurrent ? textureCurrent : texturePrevious;\n\n      return {\n        x: xScale(0) - (isCurrent ? 0 : rectWidth),\n        y: yScale(start.timestamp + offset),\n        width: rectWidth,\n        height:\n          yScale(end.timestamp + offset) - yScale(start.timestamp + offset),\n        fill: texture.url(),\n      };\n    };\n\n    const calloutFn = ({\n      item: { title, label, value, timestamp },\n      offset,\n      scales: [xScale, yScale],\n      isEnd = false,\n    }) => {\n      const isPrevious = timestamp < currentStart;\n      const sideX = isPrevious ? -1 : 1;\n\n      const x = value ? xScale(value) : rectWidth;\n      const sideY = isEnd ? 1 : -1;\n      const y = yScale(timestamp + offset);\n      const callout = {\n        note: {\n          title,\n          label,\n        },\n        x: sideX * x,\n        y,\n        color: \"red\",\n        subject: {\n          radius: 6,\n        },\n      };\n\n      if (value) {\n        callout.nx = sideX * (rectWidth + 10);\n        callout.ny = y;\n      } else {\n        callout.dx = sideX * 10;\n        callout.dy = sideY * 10;\n      }\n      return callout;\n    };\n\n    const calloutsFn = ({ start, end, offset }) => [\n      calloutFn({ item: start, offset, scales }),\n      end ? calloutFn({ item: end, offset, scales, isEnd: true }) : undefined,\n    ];\n\n    const calloutsSvgData = annotations.flatMap(calloutsFn).filter(Boolean);\n    console.log(\"HISTORY/annotations\", annotations);\n    console.log(\"HISTORY/callouts\", annotations.flatMap(calloutsFn));\n\n    const callout = d3annotation()\n      .annotations(calloutsSvgData)\n      .type(d3annotationCalloutCircle);\n\n    d3.select(calloutsRef.current).call(callout);\n\n    const newRegions = annotations.map(regionFn).filter(Boolean);\n    setRegions(newRegions);\n\n    console.log(\"ANNOTATIONS/useEffect end\");\n  }, [annotations, currentStart, rectWidth, scales]);\n\n  console.log(\"ANNOTATIONS/render\");\n\n  return (\n    <>\n      <defs>\n        <clipPath id=\"clippath\">\n          <path d={clipPaths.current} />\n          <path d={clipPaths.previous} />\n        </clipPath>\n      </defs>\n      <g ref={regionsRef}>\n        {regions.map((annotation) => (\n          <rect {...annotation} clipPath=\"url(#clippath)\" />\n        ))}\n      </g>\n      <g className={styles.annotations} ref={calloutsRef} />\n    </>\n  );\n};\n","import React, { useContext, useEffect, useState, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport classnames from \"classnames\";\n\nimport {\n  TweetsContext,\n  currentInterval,\n  previousInterval,\n} from \"./TweetsProvider\";\nimport { intervalExtent, isPhone } from \"../clientUtils\";\nimport historyStyles from \"./history.module.scss\";\nimport svgStyles from \"./svg.module.scss\";\nimport { Annotations } from \"./Annotations\";\n\nconst closedPath = (bins, line, offset) => {\n  let data = bins.map(({ x0, length }) => ({\n    timestamp: x0,\n    value: length + offset,\n  }));\n\n  const first = data[0],\n    last = data[data.length - 1];\n  const extraBottom = { timestamp: last.timestamp, value: 10000 };\n  const extraTop = { timestamp: first.timestamp, value: 10000 };\n\n  data = [...data, extraBottom, extraTop, first];\n  return line(data);\n};\n\nexport const History = () => {\n  const { history } = useContext(TweetsContext);\n  // const [svgData, setSvgData] = useState([]);\n  const [scales, setScales] = useState([]);\n  const [currentStart, setCurrentStart] = useState([]);\n  const [paths, setPaths] = useState([]);\n  const [clipPaths, setClipPaths] = useState({});\n\n  const binHeight = 2;\n  const svgWidth = isPhone ? 350 : 500,\n    margin = { top: 10, right: 30, bottom: 30, left: 30 },\n    svgHeight = 366 * (binHeight + 1) + margin.top + margin.bottom,\n    width = svgWidth - margin.left - margin.right,\n    height = svgHeight - margin.top - margin.bottom;\n  const yearWidth = width / 2;\n  const maxBarWidth = yearWidth * 0.45;\n  const annotationRectWidth = yearWidth * 0.55;\n\n  const svgRef = useRef(null);\n  const xAxisRef = useRef(null);\n  const yAxisRef = useRef(null);\n\n  useEffect(() => {\n    if (!history.length) {\n      return;\n    }\n\n    const intervalCurrent = currentInterval(history);\n    setCurrentStart(intervalCurrent.start);\n    const intervalPrevious = previousInterval(history);\n    const binsCurrent = intervalCurrent.binsLowRes;\n    const binsPrevious = intervalPrevious.binsLowRes;\n    const timeExtent = intervalExtent(intervalCurrent, 60);\n\n    const xScale = d3\n      .scaleLinear()\n      .domain([0, d3.max(binsCurrent, (b) => b.length)])\n      .range([0, maxBarWidth]);\n\n    const yScale = d3.scaleTime().domain(timeExtent).range([0, height]);\n\n    setScales([xScale, yScale]);\n\n    const dateFormatter = d3.timeFormat(\"%b\"); // https://github.com/d3/d3-time-format#locale_format\n\n    const yAxis = d3\n      .axisLeft()\n      .tickFormat(dateFormatter)\n      .scale(yScale)\n      .ticks(d3.timeMonth.every(1))\n      .tickSize(0);\n    d3.select(yAxisRef.current).call(yAxis);\n\n    const xAxis = d3.axisBottom().scale(xScale).ticks(2);\n    d3.select(xAxisRef.current).call(xAxis);\n\n    // const currentYear = binsCurrent.map(({ x0, length }) => ({\n    //   x: xScale(0),\n    //   width: xScale(length),\n    //   y: yScale(x0),\n    //   height: binHeight,\n    //   rx: 1,\n    // }));\n    // const previousYear = binsPrevious.map(({ x0, length }) => ({\n    //   x: xScale(0) - xScale(length),\n    //   width: xScale(length),\n    //   y: yScale(x0),\n    //   height: binHeight,\n    //   rx: 1,\n    // }));\n    // setSvgData([currentYear, previousYear]);\n\n    const lineCurrent = d3\n      .line()\n      .curve(d3.curveCardinal.tension(0.3))\n      .x((d) => xScale(d.length))\n      .y((d) => yScale(d.x0));\n    const linePrevious = d3\n      .line()\n      .curve(d3.curveCardinal.tension(0.3))\n      .x((d) => xScale(-d.length))\n      .y((d) => yScale(d.x0));\n\n    const pathCurrent = lineCurrent(binsCurrent);\n    const pathPrevious = linePrevious(binsPrevious);\n    setPaths([pathCurrent, pathPrevious]);\n\n    const clipLineCurrent = d3\n      .line()\n      .x((d) => xScale(d.value))\n      .y((d) => yScale(d.timestamp));\n\n    const clipLinePrevious = d3\n      .line()\n      .x((d) => xScale(-d.value))\n      .y((d) => yScale(d.timestamp));\n\n    const pixelOffset = xScale.invert(2) - xScale.invert(0);\n    const clipPathCurrent = closedPath(\n      binsCurrent,\n      clipLineCurrent,\n      pixelOffset\n    );\n    const clipPathPrevious = closedPath(\n      binsPrevious,\n      clipLinePrevious,\n      pixelOffset\n    );\n\n    setClipPaths({ current: clipPathCurrent, previous: clipPathPrevious });\n\n    console.log(\"HISTORY/useEffect end\");\n  }, [history, height, maxBarWidth]);\n\n  console.log(\"HISTORY/render\");\n\n  return (\n    <div className={historyStyles.container}>\n      <div className={historyStyles.years}>\n        <div className={historyStyles.left}>2019</div>\n        <div className={historyStyles.right}>2020</div>\n      </div>\n      <svg\n        className={historyStyles.svg}\n        ref={svgRef}\n        width={svgWidth}\n        height={svgHeight}\n      >\n        <g transform={`translate(${margin.left + yearWidth},${margin.top})`}>\n          {/* <g\n            className={`${svgStyles.axis} ${historyStyles.axis}`}\n            ref={xAxisRef}\n            transform={`translate(0,${height})`}\n          /> */}\n          <g\n            className={`${svgStyles.axis} ${historyStyles.axis}`}\n            ref={yAxisRef}\n          />\n          {/* <g>\n            {svgData.map((dataset, iDataset) =>\n              dataset.map((d) => (\n                <rect\n                  className={classnames({\n                    [historyStyles.previous]: iDataset,\n                    [historyStyles.current]: !iDataset,\n                  })}\n                  x={d.x}\n                  y={d.y}\n                  width={d.width}\n                  height={d.height}\n                  rx={d.rx}\n                ></rect>\n              ))\n            )}\n          </g> */}\n          <g>\n            {paths.map((path, i) => (\n              <path\n                className={classnames(svgStyles.path, {\n                  [svgStyles.current]: !i,\n                  [svgStyles.previous]: i,\n                })}\n                d={path}\n              />\n            ))}\n          </g>\n          <g>\n            <Annotations\n              rectWidth={annotationRectWidth}\n              currentStart={currentStart}\n              scales={scales}\n              clipPaths={clipPaths}\n            />\n          </g>\n        </g>\n      </svg>\n    </div>\n  );\n};\n","import React from \"react\";\nimport styles from \"./tweetdetails.module.scss\";\n\nexport const TweetDetails = ({\n  tweet: {\n    derived: { timestamp, address, units, type, color, lat, long },\n  },\n}) => {\n  const unitsList = units.split(\" \");\n  const unitsStr = `${unitsList.length} ${\n    unitsList.length === 1 ? \"unit\" : \"units\"\n  } dispatched:`;\n\n  const format = (n) => Number.parseFloat(n).toFixed(3);\n  const coordinates = `${format(lat)}°N ${format(-long)}°W`;\n  return (\n    <div className={styles.container}>\n      <div>{address}</div>\n      <div className={styles.latlong}>{coordinates}</div>\n      <div>\n        <span>{unitsStr}</span>\n        {unitsList.map((unit) => (\n          <span className={styles.unit}>{unit}</span>\n        ))}\n      </div>\n    </div>\n  );\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport styles from \"./tweet.module.scss\";\nimport { UserContext, UserContextKeys } from \"./UserProvider\";\nimport { AreaAccessors, GroupByOptions } from \"../groupingOptions\";\nimport { TweetDetails } from \"./TweetDetails\";\nimport {\n  toPacificStr,\n  isActive,\n  isAtLeastSev1,\n  isAtLeastSev2,\n} from \"../clientUtils\";\nimport { SvgDot } from \"./SvgDot\";\n\nexport const TweetModes = {\n  Default: 0,\n  Detailed: 1,\n  GreyedOut: 2,\n};\n\nexport const Tweet = ({ tweet, mode = TweetModes.Default }) => {\n  const { user, setSelection } = useContext(UserContext);\n  const selectedTweet = user[UserContextKeys.SelectedTweet];\n\n  const handleClick = () => {\n    const newSelectedTweet =\n      selectedTweet && selectedTweet.id_str === tweet.id_str ? null : tweet;\n    setSelection(UserContextKeys.SelectedTweet, newSelectedTweet);\n  };\n  const active = isActive(tweet);\n  const sev1 = isAtLeastSev1(tweet);\n  const sev2 = isAtLeastSev2(tweet);\n\n  const accessor = AreaAccessors.AreaSecondary;\n  const area = accessor(tweet);\n\n  const isGreyedOut = mode === TweetModes.GreyedOut;\n  const isDetailed = mode === TweetModes.Detailed;\n  const time = toPacificStr(tweet.derived.timestamp);\n\n  return (\n    <div\n      className={`${styles.container} ${isDetailed ? styles.detailed : \"\"} ${\n        isGreyedOut ? styles.greyedOut : \"\"\n      }`}\n      onClick={handleClick}\n    >\n      <div className={styles.tweet}>\n        <div className={styles.details}>\n          <span className={styles.location}>\n            {area} @ {time}\n          </span>\n          <SvgDot active={active} sev1={sev1} sev2={sev2} />\n        </div>\n        <div>\n          {tweet.derived.description}\n        </div>\n      </div>\n      {isDetailed && <TweetDetails tweet={tweet} />}\n    </div>\n  );\n};\n","import React, { useContext } from \"react\";\nimport styles from \"./tweets.module.scss\";\nimport { Tweet, TweetModes } from \"./Tweet\";\nimport { UserContext, UserContextKeys } from \"./UserProvider\";\n\nexport const TweetList = ({ tweets = [] }) => {\n  const { user } = useContext(UserContext);\n  const selected = user[UserContextKeys.SelectedTweet];\n\n  const mode = ({ id_str }) =>\n    selected\n      ? id_str === selected.id_str\n        ? TweetModes.Detailed\n        : TweetModes.GreyedOut\n      : TweetModes.Default; // TODO - remove modes\n\n  return (\n    <div className={styles.tweets}>\n      {tweets.map((t) => (\n        <Tweet tweet={t} mode={mode(t)} />\n      ))}\n    </div>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { TweetsContext } from \"./TweetsProvider\";\n\nimport { TweetList } from \"./TweetList\";\n\nexport const TweetsActive = () => {\n  const { active24 } = useContext(TweetsContext);\n\n  return <TweetList tweets={active24} />;\n}\n","import React, { useContext } from \"react\";\nimport { TweetsContext } from \"./TweetsProvider\";\n\nimport { TweetList } from \"./TweetList\";\n\nexport const TweetsMajor = () => {\n  const { major24 } = useContext(TweetsContext);\n\n  return <TweetList tweets={major24} />;\n}\n","import React, { useContext } from \"react\";\nimport { Map } from \"./Map\";\nimport { TweetsProvider, TweetsContext } from \"./TweetsProvider\";\nimport { GroupByArea } from \"./GroupByArea\";\nimport { Header } from \"./Header\";\nimport { Rehoboam } from \"./Rehoboam\";\nimport { LegendSection } from \"./Legend\";\nimport { Histogram } from \"./Histogram\";\nimport { Section } from \"./Section\";\nimport { Paragraph } from \"./Paragraph\";\nimport { History } from \"./History\";\nimport { TweetsActive } from \"./TweetsActive\";\nimport { TweetsMajor } from \"./TweetsMajor\";\nimport { SvgDot } from \"./SvgDot\";\nimport * as d3 from \"d3\";\n\nconst formatter = d3.timeFormat(\"%-I%p\");\n\nexport const DispatchAll = () => {\n  // const { status } = useContext(TweetsContext);\n  // const time = formatter(status.lastUpdated);\n\n  const intro = (\n    <p>\n      A near-real-time visualization of Seattle Fire Department 911 dispatches.\n      All timestamps are in local time (Pacific timezone).\n      {/*Data is current as of\n      <strong>TODO</strong> in Seattle.*/} Active\n      incidents are marked\n      <SvgDot active={true} />. Incidents with ≥10 units dispatched are marked\n      as major <SvgDot sev2={true} />.\n    </p>\n  );\n\n  const pastWeek = `Cumulative number of dispatches for Seattle today, compared to the past 7 days`;\n\n  const map = \"\";\n\n  const major = (\n    <p>\n      Incidents in the past 24 hours with <strong>ten or more</strong> units\n      deployed\n    </p>\n  );\n\n  const areas =\n    \"To examine individual events, first select an area of the city.\";\n\n  const history =\n    \"This views shows total dispatches for all of Seattle per day this year compared to last year, with a few callouts for context.\";\n\n  const sources = (\n    <p>\n      The primary data source is{\" \"}\n      <a href=\"http://www2.seattle.gov/fire/realTime911/\">\n        Real-Time 911 Dispatch\n      </a>\n      . GPS locations for each incident are retrieved from{\" \"}\n      <a href=\"https://dev.socrata.com/foundry/data.seattle.gov/kzjm-xkqj\">\n        this Socrata dataset\n      </a>\n      . Seattle neighborhood GeoJSON data is from the{\" \"}\n      <a href=\"https://github.com/seattleflu/seattle-geojson/tree/master/seattle_geojsons\">\n        seattleflu/seattle-geojson\n      </a>{\" \"}\n      repository. Map powered by <a href=\"http://leafletjs.com\">Leaflet</a> via{\" \"}\n      <a href=\"https://react-leaflet.js.org\">react-leaflet</a>. Map tiles\n      provided by{\" \"}\n      <a href=\"https://www.jawg.io/docs/apidocs/static-maps/\">Jawg Maps</a>.\n    </p>\n  );\n\n  const notes = (\n    <>\n      <p>The data is up-to-date to within a minute or so.</p>\n      <p>\n        Visualization by{\" \"}\n        <a href=\"http://linkedin.com/in/anarseyf/\">Anar Seyf</a>.\n      </p>\n    </>\n  );\n\n  return (\n    <TweetsProvider>\n      <Section styleOption={2}>\n        <Paragraph title=\"Seattle Fire Real-Time Dispatch\" content={intro} />\n        <Rehoboam />\n        <Paragraph title=\"Past Week\" content={pastWeek} />\n        <Header />\n      </Section>\n\n      <Section edgeToEdge={true} styleOption={1}>\n        <Paragraph title=\"Today\" content={map} margin={true} />\n        <Map />\n      </Section>\n\n      <Section styleOption={0}>\n        <Paragraph title=\"Active Incidents\" content={\"\"} />\n        <TweetsActive />\n        <Paragraph title=\"Major Incidents\" content={major} />\n        <TweetsMajor />\n      </Section>\n\n      <Section styleOption={2}>\n        <Paragraph title=\"City Areas\" content={areas} />\n        <GroupByArea />\n      </Section>\n\n      <Section styleOption={1}>\n        <Paragraph title=\"Last Year vs This Year\" content={history} />\n        <History />\n      </Section>\n\n      <Section styleOption={2}>\n        <Paragraph title=\"Data Sources\" content={sources} />\n        <Paragraph title=\"Notes\" content={notes} />\n      </Section>\n    </TweetsProvider>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { TweetsContext, currentInterval } from \"./TweetsProvider\";\n\nimport { Tweet, TweetModes } from \"./Tweet\";\nimport { UserContextKeys, UserContext } from \"./UserProvider\";\nimport { TweetList } from \"./TweetList\";\n\nexport const TweetsForArea = () => {\n  const { filteredByArea } = useContext(TweetsContext);\n  const { user } = useContext(UserContext);\n  const filter = user[UserContextKeys.TypeFilter];\n\n  if (!filteredByArea.length) {\n    return null;\n  }\n  const all = currentInterval(filteredByArea).values;\n  const filtered = all.filter(\n    ({ derived: { type } }) => !filter || filter === type\n  );\n\n  return <TweetList tweets={filtered} />;\n}\n","import React from \"react\";\nimport { Map } from \"./Map\";\nimport { TweetsProvider } from \"./TweetsProvider\";\nimport { Header } from \"./Header\";\nimport { TweetsForArea } from \"./TweetsForArea\";\nimport { Rehoboam } from \"./Rehoboam\";\nimport { LegendSection } from \"./Legend\";\nimport { Histogram } from \"./Histogram\";\nimport { Paragraph } from \"./Paragraph\";\nimport { Section } from \"./Section\";\n\nexport const DispatchArea = ({ area }) => {\n  const sources = \"Data sources\";\n\n  return (\n    <TweetsProvider filters={{ area }}>\n      <Section styleOption={1}>\n        <Rehoboam area={area} />\n        <Header area={area} />\n        <Histogram />\n      </Section>\n\n      <Section styleOption={2} edgeToEdge={true}>\n        <Map area={area} />\n        <LegendSection />\n      </Section>\n\n      <Section styleOption={1}>\n        <TweetsForArea />\n      </Section>\n\n      <Section styleOption={2}>\n        <Paragraph text={sources} />\n      </Section>\n    </TweetsProvider>\n  );\n}\n","import React from \"react\";\nimport { Router, Redirect } from \"@reach/router\";\n\nimport { Dispatch } from \"./dispatch/Dispatch\";\nimport { DispatchAll } from \"./dispatch/DispatchAll\";\nimport { DispatchArea } from \"./dispatch/DispatchArea\";\n\nimport styles from \"./app.module.scss\";\n\nfunction App() {\n  return (\n    <div className={styles.app}>\n      <Router>\n        <Redirect from=\"/\" to=\"/dispatch\" />\n        <Dispatch path=\"/dispatch/\">\n          <DispatchAll default />\n          <DispatchArea path=\":area\" />\n        </Dispatch>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === \"localhost\" ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === \"[::1]\" ||\n        // 127.0.0.0/8 are considered localhost for IPv4.\n        window.location.hostname.match(\n            /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n        )\n);\n\nexport const register = (config) => {\n    if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener(\"load\", () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        \"This web app is being served cache-first by a service \" +\n                            \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then((registration) => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === \"installed\") {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                \"New content is available and will be used when all \" +\n                                    \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log(\"Content is cached for offline use.\");\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch((error) => {\n            console.error(\"Error during service worker registration:\", error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { \"Service-Worker\": \"script\" },\n    })\n        .then((response) => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get(\"content-type\");\n            if (\n                response.status === 404 ||\n                (contentType != null &&\n                    contentType.indexOf(\"javascript\") === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then((registration) => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log(\n                \"No internet connection found. App is running in offline mode.\"\n            );\n        });\n}\n\nexport const unregister = () => {\n    if (\"serviceWorker\" in navigator) {\n        navigator.serviceWorker.ready\n            .then((registration) => {\n                registration.unregister();\n            })\n            .catch((error) => {\n                console.error(error.message);\n            });\n    }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./custom.scss\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"legend_container__3I3K6\",\"item\":\"legend_item__jjQT3\",\"selected\":\"legend_selected__12qcY\",\"label\":\"legend_label__1CkRM\",\"header\":\"legend_header__2EhiS\",\"title\":\"legend_title__1JShJ\",\"total\":\"legend_total__1IlJl\",\"body\":\"legend_body__1-6Gv\",\"svg\":\"legend_svg__2LbQ3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"chart_container__3RTag\",\"header\":\"chart_header__3gCPW\",\"svg\":\"chart_svg__pP08z\",\"total\":\"chart_total__qkQSI\",\"title\":\"chart_title__2BYUk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"section_section__1TT8J\",\"content\":\"section_content__32e_z\",\"styleDefault\":\"section_styleDefault__1fobi\",\"style1\":\"section_style1__-PHu2\",\"style2\":\"section_style2__3JfYX\",\"styleMap\":\"section_styleMap__2ZHhK\",\"subcontent\":\"section_subcontent__1yzVR\",\"edgeToEdge\":\"section_edgeToEdge__28iHO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"rehoboam_container__28M8-\",\"counter\":\"rehoboam_counter__33zQ-\",\"circle\":\"rehoboam_circle__1NUqu\",\"path\":\"rehoboam_path__2oGje\",\"sev2\":\"rehoboam_sev2__20XpY\",\"dots\":\"rehoboam_dots__3KbnO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"svg\":\"history_svg__wHz8f\",\"previous\":\"history_previous__1tjyT\",\"current\":\"history_current__2e2uB\",\"years\":\"history_years__2UEbj\",\"left\":\"history_left__YNLcK\",\"right\":\"history_right___nK7k\",\"axis\":\"history_axis__1LX0b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"tweet_container__2cPfJ\",\"detailed\":\"tweet_detailed__1zw6b\",\"greyedOut\":\"tweet_greyedOut__187c4\",\"tweet\":\"tweet_tweet__2okc-\",\"type\":\"tweet_type__2VJ4m\",\"details\":\"tweet_details__165yi\",\"units\":\"tweet_units__2ZVmK\",\"location\":\"tweet_location__26Q8k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"spark_container__20mVH\",\"total\":\"spark_total__2Kxtk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paragraph\":\"paragraph_paragraph__2KRp8\",\"text\":\"paragraph_text__1NbBg\",\"margin\":\"paragraph_margin__uTVtm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"topline\":\"topline_topline__3XNKt\",\"number\":\"topline_number__HrVAF\",\"text\":\"topline_text__2_5SM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"tweetdetails_container__1rcoE\",\"explanation\":\"tweetdetails_explanation__3lEx4\",\"latlong\":\"tweetdetails_latlong__29PX1\",\"unit\":\"tweetdetails_unit__33Rog\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axis\":\"svg_axis__bET8j\",\"path\":\"svg_path__EmZTS\",\"highlight\":\"svg_highlight__1dzK0\",\"previous\":\"svg_previous__19uFf\",\"current\":\"svg_current__mnSmX\",\"now\":\"svg_now__2CbCS\",\"pulse\":\"svg_pulse__2GGpF\",\"live\":\"svg_live__2Jj88\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"dispatch_container__13oVH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"map_container__1WM_n\",\"pane\":\"map_pane__g9Le7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"area_container__8bOi9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"total_container__Dlmy9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"annotations\":\"annotations_annotations__1BK52\",\"line\":\"annotations_line__I-f5L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tweets\":\"tweets_tweets__PhO0z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__3mk8F\"};"],"sourceRoot":""}